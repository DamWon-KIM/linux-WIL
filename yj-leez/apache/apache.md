# 과제1

## 1. 서버 ip 주소 알아내기

### 컴퓨터에 부여된 실제 ip 주소 출력

```java
$ipconfig getifaddr en0
$ifconfig | grep inet
```

![스크린샷 2023-06-18 오후 7.21.18.png](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A61%20c3cbf00ba85f449694a056beffc7e1b1/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.21.18.png)

보통 nat으로 내부ip를 할당하는 경우 10.0.0.0 ~ 10.255.255.255, 172.16.0.0 ~ 172.31.255.255, 192.168.0.0 ~ 192.168.255.255 중 ip가 있어야하는데 전혀 다른 숫자가 나왔다.

혹시나싶어 ip addr 명령어를 사용하기 위해 `iproute2mac`을 설치하였다.

```java
brew install iproute2mac
```

![스크린샷 2023-06-18 오후 7.22.24.png](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A61%20c3cbf00ba85f449694a056beffc7e1b1/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.22.24.png)

똑같이 뜬다. 찾아보니 공유기를 사용하는 경우에도 Twins ip라는 기능을 사용하면 내부 ip와 공인 ip를 매핑시켜서 똑같이 뜰 수 있다고 한다.

### 컴퓨터가 외부에 접속할 때 사용하는 ip 출력

```java
$curl [ipinfo.io/ip](http://ipinfo.io/ip)
```

첫번째 사진에 포함되어 있다.

## 2. 서버 컴퓨터에 웹 서버 설치하기

### 웹 서버 설치하기

```java
brew install httpd
```

![스크린샷 2023-06-18 오후 7.45.22.png](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A61%20c3cbf00ba85f449694a056beffc7e1b1/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.45.22.png)

### 웹 서버 실행하기

```java
httpd -v
apachectl -v
```

![스크린샷 2023-06-18 오후 7.45.42.png](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A61%20c3cbf00ba85f449694a056beffc7e1b1/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.45.42.png)

까지 확인했으나 `localhost:8080`으로 실행하니 nginx 실행 창이 뜬다.

```java
brew services start httpd
```

![스크린샷 2023-06-18 오후 8.17.47.png](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A61%20c3cbf00ba85f449694a056beffc7e1b1/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.17.47.png)

찾아보니 전에 nginx를 설치한 적이 있는데 아파치가 이전에 설치된 nginx 경로의 html 파일들을 그대로 실행중인 것 같다고 한다.

```java
whereis httpd
```

명령어로 httpd 파일들의 경로를 찾아보니 다음과 같은 경로에 httpd가 저장되어있었다.

![스크린샷 2023-06-18 오후 8.23.35.png](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A61%20c3cbf00ba85f449694a056beffc7e1b1/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.23.35.png)

하지만 위의 경로들 중 default html 파일들이 들어있는 디렉토리가 없었다. 

apache2의 default html 파일들이 들어있는 디렉토리를 찾은 후에는 `/etc/nginx/site-available/default`파일이나 `/etc/nginx/nginx.conf` 파일 내부의 root path를 해당 디렉토리로 변경하면 된다. 추후에 찾게 된다면 수정하겠다.

### 웹 서버 중단하기

```java
brew services stop httpd
```